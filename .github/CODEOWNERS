# Code Ownership Rules
# 
# This CODEOWNERS file defines who is responsible for reviewing and approving
# changes to different parts of the codebase. GitHub requires at least one 
# code owner approval before a PR can merge (when enabled in branch protection).
#
# Syntax: <path> <@github-handle> [<@github-handle-2>]
#
# See: https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners

# ============================================================================
# ARCHITECTURE & DOCUMENTATION
# ============================================================================

# Root architecture documentation
*.md @maintainer
RFC-*.md @maintainer
VERSION @maintainer
VERSIONING.md @maintainer
RELEASE-CHECKLIST.md @maintainer

# Architecture decisions
docs/ @maintainer
docs/RFC-* @maintainer

# Diagrams and sequences
diagrams/ @maintainer

# ============================================================================
# CI/CD & INFRASTRUCTURE
# ============================================================================

# GitHub Actions workflows and configs
.github/ @maintainer
.github/workflows/ @maintainer

# Infrastructure as Code
iac/ @maintainer
terraform/ @maintainer

# Docker configuration
docker-compose.yaml @maintainer
Dockerfile* @maintainer

# ============================================================================
# CONTRACTS & SCHEMAS
# ============================================================================

# OpenAPI specifications
contracts/openapi/ @maintainer

# Event schemas
contracts/events/ @maintainer

# Policy definitions
contracts/policy/ @maintainer
contracts/policy/policy.rego @maintainer

# Connector specifications
contracts/connectors/ @maintainer

# ============================================================================
# DATABASE & DATA MODELS
# ============================================================================

# Database schema
db/ @maintainer
db/schema.sql @maintainer

# Data model documentation
data/ @maintainer
data/entities.md @maintainer

# ============================================================================
# GO SERVICES
# ============================================================================

# Control Plane service
services/control-plane/ @go-team
services/control-plane/cmd/ @go-team
services/control-plane/internal/ @go-team
services/control-plane/*.go @go-team
services/control-plane/go.mod @go-team
services/control-plane/go.sum @go-team

# Connector Gateway service
services/connector-gateway/ @go-team
services/connector-gateway/cmd/ @go-team
services/connector-gateway/internal/ @go-team
services/connector-gateway/*.go @go-team
services/connector-gateway/go.mod @go-team
services/connector-gateway/go.sum @go-team

# ============================================================================
# RUST SERVICES
# ============================================================================

# Execution Plane service
services/execution-plane/ @rust-team
services/execution-plane/src/ @rust-team
services/execution-plane/Cargo.toml @rust-team
services/execution-plane/Cargo.lock @rust-team

# Agent service
services/agent/ @rust-team
services/agent/src/ @rust-team
services/agent/Cargo.toml @rust-team
services/agent/Cargo.lock @rust-team

# ============================================================================
# FRONTEND/WEB
# ============================================================================

# Web application
apps/web/ @frontend-team
apps/web/src/ @frontend-team
apps/web/package.json @frontend-team
apps/web/tsconfig.json @frontend-team

# ============================================================================
# DEVELOPMENT & BUILD
# ============================================================================

# Build configuration
Makefile @maintainer
.env.example @maintainer

# Development documentation
docs/START-HERE.md @maintainer
DEV_SETUP.md @maintainer
local-dev-compose.md @maintainer

# ============================================================================
# DEFAULT (catch-all)
# ============================================================================

# Any file not matching above rules requires approval from maintainer
* @maintainer

# ============================================================================
# NOTES
# ============================================================================
#
# @maintainer  — Primary repository owner, must approve all changes
# @go-team     — Go service owners (control-plane, connector-gateway)
# @rust-team   — Rust service owners (execution-plane, agent)
# @frontend-team — TypeScript/web app owners
#
# To assign actual GitHub users:
#   1. Replace @go-team with actual GitHub handle(s), e.g., @alice @bob
#   2. Update this file via PR to test assignments
#   3. Verify PR shows correct code owners requested for review
#
# For Phase 0, you may set everyone to @maintainer.
# In Phase 1, transition to team-based ownership.
#
